{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\nconst API_KEY = '47426000-935f334b470be797f22188feb';\nconst BASE_URL = 'https://pixabay.com/api/';\n\nexport async function servicePhoto(value, page, per_page = 3) {\n  const response = await axios(BASE_URL, {\n    params: {\n      key: API_KEY,\n      q: value,\n      image_type: 'photo',\n      orientation: 'horizontal',\n      safesearch: true,\n      page,\n      per_page,\n    },\n  });\n  console.log(per_page);\n\n  // console.log(response.data);\n  return response.data;\n}\n\nexport async function serviceNextPhoto(value, page, per_page) {\n  const nextPage = await servicePhoto(value, page, per_page);\n  console.log(nextPage);\n\n  return nextPage;\n}\n","export function createMarkup(arr) {\n  return arr\n    .map(\n      ({\n        webformatURL,\n        largeImageURL,\n        tags,\n        likes,\n        views,\n        comments,\n        downloads,\n      }) =>\n        `<li class=\"photo-item\">\n        <a class=\"photo-link\" href=\"${largeImageURL}\" >\n        <img class=\"photo-img\" src=${webformatURL} alt=\"${tags}\"/>\n       </a> \n\n       <div class=\"photo-info-container\">\n          <div class=\"photo-info-item\">\n          <span class=\"photo-info-label\">Likes</span>\n          <span class=\"photo-info-value\">${likes}</span>\n          </div>\n          <div class=\"photo-info-item\">\n          <span class=\"photo-info-label\">Views</span>\n          <span class=\"photo-info-value\">${views}</span>\n          </div>\n          <div class=\"photo-info-item\">\n          <span class=\"photo-info-label\">Comments</span>\n          <span class=\"photo-info-value\">${comments}</span>\n          </div>\n          <div class=\"photo-info-item\">\n          <span class=\"photo-info-label\">Downloads</span>\n          <span class=\"photo-info-value\">${downloads}</span>\n          </div>\n       </div>\n       </li>`\n    )\n    .join('');\n}\n","import { servicePhoto, serviceNextPhoto } from './js/pixabay-api';\nimport { createMarkup } from './js/render-functions';\n\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nconst form = document.querySelector('.form-search');\nconst spinner = document.querySelector('.loader');\nconst gallery = document.querySelector('.image-gallery');\nconst loadMore = document.querySelector('.load-more-btn');\n\nlet page = 10;\nlet value;\nlet per_page = 3;\n\nform.addEventListener('submit', handleSubmit);\nspinner.style.visibility = 'hidden';\nloadMore.style.visibility = 'hidden';\n\nconst galleryBox = new SimpleLightbox('.image-gallery a', {\n  overlayOpacity: 0.8,\n  captionsData: 'alt',\n  captionDelay: 250,\n  captionPosition: 'bottom',\n  captionType: 'attr',\n});\n\nasync function handleSubmit(event) {\n  event.preventDefault();\n  spinner.style.visibility = 'visible';\n\n  value = event.target.elements.imageQuery.value.trim();\n  if (!value) {\n    spinner.style.visibility = 'hidden';\n    return;\n  }\n  servicePhoto(value, page)\n    .then(photo => {\n      gallery.innerHTML = '';\n      if (!photo.total) {\n        iziToast.show({\n          backgroundColor: 'red',\n          position: 'topRight',\n          messageColor: 'white',\n          iconColor: 'white',\n          maxWidth: 432,\n          message:\n            'Sorry, there are no images matching your search query. Please try again!',\n        });\n        loadMore.style.visibility = 'hidden';\n        return;\n      }\n      console.log(photo);\n      gallery.innerHTML = createMarkup(photo.hits);\n      loadMore.style.visibility = 'visible';\n      galleryBox.refresh();\n      form.reset();\n    })\n    .catch(error => {\n      iziToast.error({\n        backgroundColor: 'red',\n        position: 'topRight',\n        messageColor: 'white',\n        iconColor: 'white',\n        maxWidth: 432,\n        message: error.message,\n      });\n      console.log(error.message);\n      loadMore.style.visibility = 'hidden';\n    })\n    .finally(() => {\n      spinner.style.visibility = 'hidden';\n    });\n}\nloadMore.addEventListener('click', handleLoadMore);\n\nasync function handleLoadMore(event) {\n  event.preventDefault();\n  page += 1;\n  serviceNextPhoto(value, page)\n    .then(data => {\n      gallery.innerHTML = createMarkup(data.hits);\n\n      const allPages = Math.ceil(data.totalHits / per_page);\n      if (page === allPages) {\n        loadMore.style.visibility = 'hidden';\n        iziToast.show({\n          backgroundColor: 'blue',\n          position: 'topRight',\n          messageColor: 'white',\n          iconColor: 'white',\n          maxWidth: 432,\n          message: \"We're sorry, but you've reached the end of search results.\",\n        });\n      }\n      console.log(allPages);\n    })\n    .catch(error => {\n      iziToast.error({\n        backgroundColor: 'red',\n        position: 'topRight',\n        messageColor: 'white',\n        iconColor: 'white',\n        maxWidth: 432,\n        message: error.message,\n      });\n      console.log(error.message);\n    });\n}\n"],"names":["API_KEY","BASE_URL","servicePhoto","value","page","per_page","response","axios","serviceNextPhoto","nextPage","createMarkup","arr","webformatURL","largeImageURL","tags","likes","views","comments","downloads","form","spinner","gallery","loadMore","handleSubmit","galleryBox","SimpleLightbox","event","photo","iziToast","error","handleLoadMore","data","allPages"],"mappings":"owBACA,MAAMA,EAAU,qCACVC,EAAW,2BAEV,eAAeC,EAAaC,EAAOC,EAAMC,EAAW,EAAG,CAC5D,MAAMC,EAAW,MAAMC,EAAMN,EAAU,CACrC,OAAQ,CACN,IAAKD,EACL,EAAGG,EACH,WAAY,QACZ,YAAa,aACb,WAAY,GACZ,KAAAC,EACA,SAAAC,CACD,CACL,CAAG,EACD,eAAQ,IAAIA,CAAQ,EAGbC,EAAS,IAClB,CAEO,eAAeE,EAAiBL,EAAOC,EAAMC,EAAU,CAC5D,MAAMI,EAAW,MAAMP,EAAaC,EAAOC,EAAMC,CAAQ,EACzD,eAAQ,IAAII,CAAQ,EAEbA,CACT,CC3BO,SAASC,EAAaC,EAAK,CAChC,OAAOA,EACJ,IACC,CAAC,CACC,aAAAC,EACA,cAAAC,EACA,KAAAC,EACA,MAAAC,EACA,MAAAC,EACA,SAAAC,EACA,UAAAC,CACD,IACC;AAAA,sCAC8BL,CAAa;AAAA,qCACdD,CAAY,SAASE,CAAI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,2CAMnBC,CAAK;AAAA;AAAA;AAAA;AAAA,2CAILC,CAAK;AAAA;AAAA;AAAA;AAAA,2CAILC,CAAQ;AAAA;AAAA;AAAA;AAAA,2CAIRC,CAAS;AAAA;AAAA;AAAA,aAI/C,EACA,KAAK,EAAE,CACZ,CC9BA,MAAMC,EAAO,SAAS,cAAc,cAAc,EAC5CC,EAAU,SAAS,cAAc,SAAS,EAC1CC,EAAU,SAAS,cAAc,gBAAgB,EACjDC,EAAW,SAAS,cAAc,gBAAgB,EAExD,IAAIlB,EAAO,GACPD,EACAE,EAAW,EAEfc,EAAK,iBAAiB,SAAUI,CAAY,EAC5CH,EAAQ,MAAM,WAAa,SAC3BE,EAAS,MAAM,WAAa,SAE5B,MAAME,EAAa,IAAIC,EAAe,mBAAoB,CACxD,eAAgB,GAChB,aAAc,MACd,aAAc,IACd,gBAAiB,SACjB,YAAa,MACf,CAAC,EAED,eAAeF,EAAaG,EAAO,CAKjC,GAJAA,EAAM,eAAc,EACpBN,EAAQ,MAAM,WAAa,UAE3BjB,EAAQuB,EAAM,OAAO,SAAS,WAAW,MAAM,OAC3C,CAACvB,EAAO,CACViB,EAAQ,MAAM,WAAa,SAC3B,MACD,CACDlB,EAAaC,EAAOC,CAAI,EACrB,KAAKuB,GAAS,CAEb,GADAN,EAAQ,UAAY,GAChB,CAACM,EAAM,MAAO,CAChBC,EAAS,KAAK,CACZ,gBAAiB,MACjB,SAAU,WACV,aAAc,QACd,UAAW,QACX,SAAU,IACV,QACE,0EACZ,CAAS,EACDN,EAAS,MAAM,WAAa,SAC5B,MACD,CACD,QAAQ,IAAIK,CAAK,EACjBN,EAAQ,UAAYX,EAAaiB,EAAM,IAAI,EAC3CL,EAAS,MAAM,WAAa,UAC5BE,EAAW,QAAO,EAClBL,EAAK,MAAK,CAChB,CAAK,EACA,MAAMU,GAAS,CACdD,EAAS,MAAM,CACb,gBAAiB,MACjB,SAAU,WACV,aAAc,QACd,UAAW,QACX,SAAU,IACV,QAASC,EAAM,OACvB,CAAO,EACD,QAAQ,IAAIA,EAAM,OAAO,EACzBP,EAAS,MAAM,WAAa,QAClC,CAAK,EACA,QAAQ,IAAM,CACbF,EAAQ,MAAM,WAAa,QACjC,CAAK,CACL,CACAE,EAAS,iBAAiB,QAASQ,CAAc,EAEjD,eAAeA,EAAeJ,EAAO,CACnCA,EAAM,eAAc,EACpBtB,GAAQ,EACRI,EAAiBL,EAAOC,CAAI,EACzB,KAAK2B,GAAQ,CACZV,EAAQ,UAAYX,EAAaqB,EAAK,IAAI,EAE1C,MAAMC,EAAW,KAAK,KAAKD,EAAK,UAAY1B,CAAQ,EAChDD,IAAS4B,IACXV,EAAS,MAAM,WAAa,SAC5BM,EAAS,KAAK,CACZ,gBAAiB,OACjB,SAAU,WACV,aAAc,QACd,UAAW,QACX,SAAU,IACV,QAAS,4DACnB,CAAS,GAEH,QAAQ,IAAII,CAAQ,CAC1B,CAAK,EACA,MAAMH,GAAS,CACdD,EAAS,MAAM,CACb,gBAAiB,MACjB,SAAU,WACV,aAAc,QACd,UAAW,QACX,SAAU,IACV,QAASC,EAAM,OACvB,CAAO,EACD,QAAQ,IAAIA,EAAM,OAAO,CAC/B,CAAK,CACL"}